{% extends "auctions/layout.html" %}
{% load crispy_forms_tags %}

{% block body %}

    {% if listing.image_URL %}
        <div class="listing-jumbo" style="background-image:url({{listing.image_URL}})">
            <div>
                <h1>{{listing.title}}</h1>
            </div>
        </div>
    {% else %}
        <div class="mt-4">
            <h1>{{listing.title}}</h1>
        </div>
    {% endif%}

    <div class="listing-content">
        <form action="{% url 'listing' listing_id=listing.id %}" method="POST"> 
            {% csrf_token %}
            <strong class="pt-2 pb-2">Current Bid:</strong> 
            <span class="badge badge-primary bid-badge  p-2">â‚¬{{listing.initial_bid}}</span>
            <input type="submit" value="{{ watchlist_value }}" name="watchlist_submit" class="btn btn-primary accent" />  
        </form>
        <form action="{% url 'listing' listing_id=listing.id %}" method="POST"> 
            {% csrf_token %}
            {% crispy bid_form %}
        </form>
        <p class="mt-2">
            {{listing.description}}
        </p>
    </div>
    <form action="{% url 'listing' listing_id=listing.id %}" method="POST" class="mt-3">
        {% csrf_token %}
        {% crispy comment_form %}
        <small>posting as: <strong>{{user.username}}</strong></small>
   </form>
   {% if comments %}
    <div class="mt-4">
            <h2>Comments</h2>
            {% for comment in comments%}
            <p class="comment mt-4 mt-4">
                <div><smalL><strong>{{comment.author.username}}</strong> says: </small></div>
                    {{comment.content}}
                <div><time><i class="material-icons-outlined">schedule</i> {{comment.created}} </time></div>
            </p>
            {% endfor %}
    </div>
   {% endif %}
{% endblock %}